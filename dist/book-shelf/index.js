(()=>{"use strict";var t,e={87:t=>{t.exports=window.wp.element},427:t=>{t.exports=window.wp.components},455:t=>{t.exports=window.wp.apiFetch},530:(t,e,o)=>{var l=o(997),a=o(715),r=o(427),n=o(87),i=o(455),s=o.n(i),d=o(790);(0,l.registerBlockType)("ttbp/book-shelf",{edit:({attributes:t,setAttributes:e})=>{const o=(0,a.useBlockProps)(),{category:l,limit:i,orderby:c,order:p,showMeta:h,showExcerpt:b,columns:g,template:u}=t,[m,v]=(0,n.useState)([]),[x,y]=(0,n.useState)(!0),[k,f]=(0,n.useState)([]),[j,w]=(0,n.useState)(!0);(0,n.useEffect)(()=>{s()({path:"/ttbp/v1/categories"}).then(t=>{v(t||[]),y(!1)}).catch(()=>{v([]),y(!1)})},[]),(0,n.useEffect)(()=>{w(!0);const t=l&&l.length>0?l.join(","):"",e=new URLSearchParams({limit:i.toString(),orderby:c,order:p});t&&e.append("category",t),s()({path:`/ttbp/v1/books?${e.toString()}`}).then(t=>{f(t||[]),w(!1)}).catch(()=>{f([]),w(!1)})},[l,i,c,p]);const C=[{label:"All Categories",value:""}].concat(m.map(t=>({label:`${t.name} (${t.count})`,value:t.slug})));return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(a.InspectorControls,{children:[(0,d.jsxs)(r.PanelBody,{title:"Book Query",initialOpen:!0,children:[(0,d.jsx)(r.SelectControl,{label:"Category",value:l&&l.length>0?l[0]:"",options:C,onChange:t=>(t=>{Array.isArray(t)?e({category:t}):e({category:t?[t]:[]})})(t),disabled:x,help:x?"Loading categories...":"Select a book category to filter by"}),(0,d.jsx)(r.TextControl,{label:"Number of Books",type:"number",value:i,onChange:t=>{const o=parseInt(t);!isNaN(o)&&o>0&&o<=50&&e({limit:o})},help:"Maximum number of books to display (1-50)"}),(0,d.jsx)(r.SelectControl,{label:"Order By",value:c,options:[{label:"Title",value:"title"},{label:"Date",value:"date"},{label:"Modified",value:"modified"},{label:"Menu Order",value:"menu_order"}],onChange:t=>e({orderby:t})}),(0,d.jsx)(r.SelectControl,{label:"Order",value:p,options:[{label:"Ascending",value:"ASC"},{label:"Descending",value:"DESC"}],onChange:t=>e({order:t})})]}),(0,d.jsxs)(r.PanelBody,{title:"Display Options",initialOpen:!1,children:[(0,d.jsx)(r.ToggleControl,{label:"Show Meta",checked:h,onChange:t=>e({showMeta:t}),help:"Display book metadata (author, ISBN, etc.)"}),(0,d.jsx)(r.ToggleControl,{label:"Show Excerpt",checked:b,onChange:t=>e({showExcerpt:t}),help:"Display book excerpt/description"}),(0,d.jsx)(r.RangeControl,{label:"Columns",value:g,onChange:t=>e({columns:t}),min:1,max:6,help:"Number of columns in the grid"}),(0,d.jsx)(r.SelectControl,{label:"Template",value:u,options:[{label:"Grid",value:"grid"},{label:"List",value:"list"}],onChange:t=>e({template:t})})]})]}),(0,d.jsx)("div",{...o,children:(0,d.jsx)("div",{className:"ttbp-books-list total-books-list ttbp-books-grid",style:{margin:"20px 0",padding:0},children:j?(0,d.jsx)("div",{style:{padding:"40px",textAlign:"center",color:"#666"},children:"Loading books..."}):0===k.length?(0,d.jsxs)("div",{style:{padding:"40px",textAlign:"center",color:"#666"},children:["No books found. ",l&&l.length>0&&"Try selecting a different category or clearing the filter."]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("style",{children:`\n\t\t\t\t\t\t\t\t\t.wp-block-ttbp-book-shelf .books-grid {\n\t\t\t\t\t\t\t\t\t\tdisplay: grid !important;\n\t\t\t\t\t\t\t\t\t\tgrid-template-columns: repeat(${g}, 1fr) !important;\n\t\t\t\t\t\t\t\t\t\tgap: 18px !important;\n\t\t\t\t\t\t\t\t\t\tmargin: 0 !important;\n\t\t\t\t\t\t\t\t\t\tpadding: 0 !important;\n\t\t\t\t\t\t\t\t\t\tlist-style: none !important;\n\t\t\t\t\t\t\t\t\t\twidth: 100% !important;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t`}),(0,d.jsx)("div",{className:`books-grid book-col-${g}`,style:{display:"grid",gridTemplateColumns:`repeat(${g}, 1fr)`,gap:"18px",margin:0,padding:0,listStyle:"none",width:"100%"},children:k.map(t=>(0,d.jsx)("div",{className:"book-item",children:(0,d.jsxs)("div",{className:"book-cover",children:[t.featured_image?(0,d.jsx)("img",{src:t.featured_image.url,alt:t.title,style:{width:"100%",height:"220px",objectFit:"cover"}}):(0,d.jsx)("div",{className:"book-cover-placeholder",style:{height:"220px",background:"#f0f0f0",display:"flex",alignItems:"center",justifyContent:"center",color:"#999",fontSize:"48px"},children:"ðŸ“š"}),(0,d.jsx)("div",{className:"book-overlay",children:(0,d.jsxs)("div",{className:"book-overlay-link",children:[(0,d.jsx)("div",{className:"book-title",children:t.title}),(0,d.jsx)("div",{className:"book-author",children:t.authors&&t.authors.length>0?t.authors.join(", "):"Unknown Author"})]})})]})},t.id))})]})})})]})},save:()=>null})},715:t=>{t.exports=window.wp.blockEditor},790:t=>{t.exports=window.ReactJSXRuntime},997:t=>{t.exports=window.wp.blocks}},o={};function l(t){var a=o[t];if(void 0!==a)return a.exports;var r=o[t]={exports:{}};return e[t](r,r.exports,l),r.exports}l.m=e,t=[],l.O=(e,o,a,r)=>{if(!o){var n=1/0;for(c=0;c<t.length;c++){for(var[o,a,r]=t[c],i=!0,s=0;s<o.length;s++)(!1&r||n>=r)&&Object.keys(l.O).every(t=>l.O[t](o[s]))?o.splice(s--,1):(i=!1,r<n&&(n=r));if(i){t.splice(c--,1);var d=a();void 0!==d&&(e=d)}}return e}r=r||0;for(var c=t.length;c>0&&t[c-1][2]>r;c--)t[c]=t[c-1];t[c]=[o,a,r]},l.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return l.d(e,{a:e}),e},l.d=(t,e)=>{for(var o in e)l.o(e,o)&&!l.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},l.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t={170:0,70:0};l.O.j=e=>0===t[e];var e=(e,o)=>{var a,r,[n,i,s]=o,d=0;if(n.some(e=>0!==t[e])){for(a in i)l.o(i,a)&&(l.m[a]=i[a]);if(s)var c=s(l)}for(e&&e(o);d<n.length;d++)r=n[d],l.o(t,r)&&t[r]&&t[r][0](),t[r]=0;return l.O(c)},o=globalThis.webpackChunktotal_book_blocks=globalThis.webpackChunktotal_book_blocks||[];o.forEach(e.bind(null,0)),o.push=e.bind(null,o.push.bind(o))})();var a=l.O(void 0,[70],()=>l(530));a=l.O(a)})();
//# sourceMappingURL=index.js.map